<%@page language="java" import="java.sql.*"%>
<jsp:useBean id="lg" class="login.Login" scope="request"/>
<jsp:useBean id="db" class="database.Db" scope="request"/>
<jsp:setProperty name="db" property="*" />
<jsp:setProperty name="lg" property="*" />

<%
String usr=request.getParameter("usrname");
String pass=request.getParameter("passwd");
lg.init(request.getSession());
int redir=lg.checkSession();
if(redir==1)
    response.sendRedirect("admin-home.jsp");
else if(redir==2)
    response.sendRedirect("officer-home.jsp");
int code=lg.loghimin(usr, pass);
if(code==1)
{
    response.sendRedirect("login.jsp");
}
else
{

%>

<html>
<head>
    <script language="javascript" src="keyboard/keyboard.js" type="text/javascript"> 
    </script>
    <link rel="SHORTCUT ICON" href="images/icon.ico"/>
    <script language="JavaScript" type="text/javascript">
        function window_onload() {
            keybd.style.display = 'none';
        }

        function showhide_onclick() {
            if (login.showhide.value == 'Show Keyboard') {
                keybd.style.display = 'block';
                login.showhide.value = 'Hide Keyboard';
            }
            else {
                keybd.style.display = 'none';
                login.showhide.value = 'Show Keyboard';
            }
        }

    </script>

    <style type="text/css">
        body
        {
            background-color: #E0F0FE;
            padding: 0px;
            margin: 0px;
        }
        #maindiv
        {
            height: 100%;
        }
        #maintd
        {
            width: 696px;
            height: 487px;
            background-image: url('images/login_panel.png');
            background-repeat: no-repeat;
            vertical-align: bottom;
        }
        #innerdiv
        {
            margin: 10px;
            padding: 10px;
            width: 96%;
            height: 286px;
        }
        .innertd
        {
            text-align: center;
        }
        .toptd
        {
            text-align: center;
            color: #FFFFFF; 
            font-family: sans-serif; 
            font-size: x-small;
        }
        .cabutt
        {
            background-color: #3366CC;
            color: #FFFFFF;
            width: 27px;
            height: 26;
            position: relative;
            border-style: outset;
            border-color: Black;
            font-family: "Courier New" , Courier, monospace;
        }
        .cabutt2
        {
            background-color: #3366CC;
            color: #FFFFFF;
            width: 52px;
            height: 26;
            position: relative;
            border-style: outset;
            border-color: Black;
        }
        .cabutt3
        {
            background-color: #3366CC;
            color: #FFFFFF;
            width: 300px;
            height: 26;
            position: relative;
            border-style: outset;
            border-color: Black;
        }
    </style>
    <title>Login</title>
</head>
<body onload="return window_onload()">
    <div id="keybd" style="position: absolute; float: left; width: 475px;
        height: 162px; display: none; left: 20px; top: 20px;">
        <table border="0" style="border: medium double #000000; width: 100%;
            border-collapse: collapse; background-color: #99CCFF;">
            <tr>
                <td>
                </td>
                <td style="width: 34px">
                    <input class="cabutt" type="button" value="1" onclick="nkey(1)" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="2" onclick="nkey(2)" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="3" onclick="nkey(3)" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="4" onclick="nkey(4)" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="5" onclick="nkey(5)" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="6" onclick="nkey(6)" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="7" onclick="nkey(7)" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="8" onclick="nkey(8)" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="9" onclick="nkey(9)" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="0" onclick="nkey(0)" />
                </td>
                <td colspan="2">
                    <input class="cabutt2" type="button" value="&larr;" onclick="fkey('bs')" />
                </td>
            </tr>
            <tr>
                <td>
                    <input type="text" name="lockdisp" size="3" maxlength="4" value="&nbsp;" />
                </td>
                <td style="width: 34px">
                    <input class="cabutt" type="button" value="Q" onclick="nkey('q')"
                        style="left: 1px; top: 0px" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="W" onclick="nkey('w')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="E" onclick="nkey('e')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="R" onclick="nkey('r')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="T" onclick="nkey('t')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="Z" onclick="nkey('z')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="U" onclick="nkey('u')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="I" onclick="nkey('i')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="O" onclick="nkey('o')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="P" onclick="nkey('p')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="Ü" onclick="ukey('ü')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="+" onclick="zkey('+')" />
                </td>
            </tr>
            <tr>
                <td>
                    <input class="cabutt2" type="button" value="Caps" onclick="skey('caps')" />
                </td>
                <td style="width: 34px">
                    <input class="cabutt" type="button" value="A" onclick="nkey('a')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="S" onclick="nkey('s')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="D" onclick="nkey('d')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="F" onclick="nkey('f')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="G" onclick="nkey('g')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="H" onclick="nkey('h')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="J" onclick="nkey('j')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="K" onclick="nkey('k')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="L" onclick="nkey('l')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="Ö" onclick="ukey('ö')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="Ä" onclick="ukey('ä')" />
                </td>
            </tr>
            <tr>
                <td>
                    <input class="cabutt2" type="button" value="&uarr;" onclick="skey('uc')">
                </td>
                <td style="width: 34px">
                    <input class="cabutt" type="button" value="Y" onclick="nkey('y')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="X" onclick="nkey('x')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="C" onclick="nkey('c')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="V" onclick="nkey('v')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="B" onclick="nkey('b')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="N" onclick="nkey('n')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="M" onclick="nkey('m')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="," onclick="zkey(',')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="." onclick="zkey('.')" />
                </td>
                <td>
                    <input class="cabutt" type="button" value="-" onclick="zkey('-')" />
                </td>
            </tr>
            <tr>
                <td>
                    <center>
                        <input type="text" name="capsdisp" size="3" maxlength="4" value="" />
                    </center>
                </td>
                <td style="width: 34px">
                    &nbsp;
                </td>
                <td colspan="9">
                    <input class="cabutt3" type="button" value="&nbsp;" onclick="nkey(' ')" />
                </td>
                <td colspan="2">
                    &nbsp;<input class="cabutt2" type="button" value="Enter" onclick="ekey()" />
                </td>
            </tr>
        </table>
    </div>
    <div id="maindiv">
        <table style="width: 100%; height: 100%">
            <tr>
                <td bgcolor="ActiveCaption" colspan="3" 
                    style="height: 28px">
                </td>
            </tr>
            <tr>
                <td>
                    &nbsp;
                </td>
                <td style="vertical-align: top; text-align: right;">
                    &nbsp;
                </td>
                <td>
                    &nbsp;
                </td>
            </tr>
            <tr>
                <td>
                    &nbsp;
                </td>
                <td id="maintd">
                    <div id="innerdiv">
                        <form id="login" name="login" action="" method="post">
                        <table style="width: 100%; height: 100%">
                            <tr>
                                <td class="innertd" style="width: 296px">
                                    <span lang="en-us">User Name</span>
                                </td>
                                <td class="innertd" style="width: 445px">
                                    <input id="username" name="usrname" type="text" style="width: 200px" />
                                </td>
                                <td class="innertd">
                                    &nbsp;
                                </td>
                            </tr>
                            <tr>
                                <td class="innertd" style="width: 296px">
                                    <span lang="en-us">Password</span>
                                </td>
                                <td class="innertd" style="width: 445px">
                                    <input id="passwd" name="passwd" style="width: 200px" type="password" />
                                </td>
                                <td class="innertd">
                                    <input id="showhide" style="color: #FFFFFF; background-color: #0066CC;
                                        width: 102px;" type="button" value="Show Keyboard" onclick="return showhide_onclick()" />
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3" class="innertd">
                                    <input id="Submit1" type="image" src="images/login_buton.png"
                                        value="submit" />
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3" class="innertd" style="font-style: normal; font-weight: bold">
                                    <span lang="en-us" 
                                        style="color: #3366FF; font-size: medium; font-family: sans-serif;">Register
                                        as guest</span>
                                </td>
                            </tr>
                        </table>
                        </form>
                    </div>
                </td>
                <td>
                    &nbsp;
                </td>
            </tr>
            <tr>
                <td style="height: 149px">
                    &nbsp;
                </td>
                <td style="height: 149px">
                    &nbsp;
                </td>
                <td style="height: 149px">
                    &nbsp;
                </td>
            </tr>
            <tr>
                <td bgcolor="ActiveCaption" colspan="3" style="height: 29px">
                    <table style="width: 100%;">
                        <tr>
                            <td class="toptd" >
                                <span lang="en-us">Downloads</span>
                            </td>
                            <td class="toptd">
                                <span lang="en-us">Users Manual</span>
                            </td>
                            <td class="toptd">
                                <span lang="en-us">About</span>
                            </td>
                            <td class="toptd">
                                <span lang="en-us">Contact Us</span></td>
                            <td class="toptd">
                                <span lang="en-us">Help</span>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </div>
</body>
</html>
<% } %>